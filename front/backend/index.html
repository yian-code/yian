<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.46">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta name="YiAn的个人博客网站" content="易安,易安的个人博客,前端,图像视觉,ROS"><title>MongoDB | YiAn</title><meta name="description" content="Blog of Yi An">
    <link rel="modulepreload" href="/yian/assets/app.63d6be65.js"><link rel="modulepreload" href="/yian/assets/index.html.d0cff560.js"><link rel="modulepreload" href="/yian/assets/index.html.89c48770.js"><link rel="prefetch" href="/yian/assets/index.html.5f7bd17e.js"><link rel="prefetch" href="/yian/assets/index.html.655c6637.js"><link rel="prefetch" href="/yian/assets/note.html.004c435b.js"><link rel="prefetch" href="/yian/assets/ros.html.b5466551.js"><link rel="prefetch" href="/yian/assets/Git.html.f13d1f2d.js"><link rel="prefetch" href="/yian/assets/Markdown.html.68637163.js"><link rel="prefetch" href="/yian/assets/index.html.bf6e1d5b.js"><link rel="prefetch" href="/yian/assets/Webpack.html.04e02597.js"><link rel="prefetch" href="/yian/assets/npm.html.4c80690a.js"><link rel="prefetch" href="/yian/assets/vscode.html.b9c6592e.js"><link rel="prefetch" href="/yian/assets/vuepress.html.f6602891.js"><link rel="prefetch" href="/yian/assets/yarn.html.393ee0e8.js"><link rel="prefetch" href="/yian/assets/index.html.55575cf9.js"><link rel="prefetch" href="/yian/assets/index.html.6902a4c6.js"><link rel="prefetch" href="/yian/assets/algorithm.html.48c74688.js"><link rel="prefetch" href="/yian/assets/index.html.f5efef70.js"><link rel="prefetch" href="/yian/assets/index.html.50747523.js"><link rel="prefetch" href="/yian/assets/note.html.5bc65220.js"><link rel="prefetch" href="/yian/assets/index.html.2e1af98f.js"><link rel="prefetch" href="/yian/assets/cprimer_begin.html.e55e3ba2.js"><link rel="prefetch" href="/yian/assets/cprimer_end.html.6b66c922.js"><link rel="prefetch" href="/yian/assets/note.html.f25f8e75.js"><link rel="prefetch" href="/yian/assets/index.html.3a6162e6.js"><link rel="prefetch" href="/yian/assets/linux2.html.f9f8da54.js"><link rel="prefetch" href="/yian/assets/index.html.6c87bb7d.js"><link rel="prefetch" href="/yian/assets/bom.html.1cbf2ccc.js"><link rel="prefetch" href="/yian/assets/css.html.e917b761.js"><link rel="prefetch" href="/yian/assets/dom.html.24f7d1c0.js"><link rel="prefetch" href="/yian/assets/es6.html.a89187bc.js"><link rel="prefetch" href="/yian/assets/html.html.d241937b.js"><link rel="prefetch" href="/yian/assets/jquery.html.ea9367b6.js"><link rel="prefetch" href="/yian/assets/js_note.html.9f37b009.js"><link rel="prefetch" href="/yian/assets/node.html.58c9f21f.js"><link rel="prefetch" href="/yian/assets/index.html.c1005be9.js"><link rel="prefetch" href="/yian/assets/index.html.b002f521.js"><link rel="prefetch" href="/yian/assets/interview.html.235c4f45.js"><link rel="prefetch" href="/yian/assets/index.html.c0dd24d6.js"><link rel="prefetch" href="/yian/assets/index.html.89181c82.js"><link rel="prefetch" href="/yian/assets/index.html.cfd366bc.js"><link rel="prefetch" href="/yian/assets/python.html.667e5ead.js"><link rel="prefetch" href="/yian/assets/index.html.ea8b029b.js"><link rel="prefetch" href="/yian/assets/opencv_note.html.1281b9ef.js"><link rel="prefetch" href="/yian/assets/404.html.f166316b.js"><link rel="prefetch" href="/yian/assets/index.html.c0a1c3b3.js"><link rel="prefetch" href="/yian/assets/index.html.b32e355e.js"><link rel="prefetch" href="/yian/assets/note.html.120ec60c.js"><link rel="prefetch" href="/yian/assets/ros.html.e2e20b8f.js"><link rel="prefetch" href="/yian/assets/Git.html.82174c67.js"><link rel="prefetch" href="/yian/assets/Markdown.html.d4e74595.js"><link rel="prefetch" href="/yian/assets/index.html.192b76bb.js"><link rel="prefetch" href="/yian/assets/Webpack.html.375e4147.js"><link rel="prefetch" href="/yian/assets/npm.html.9d57d0f4.js"><link rel="prefetch" href="/yian/assets/vscode.html.88b4597d.js"><link rel="prefetch" href="/yian/assets/vuepress.html.b764f207.js"><link rel="prefetch" href="/yian/assets/yarn.html.055d415e.js"><link rel="prefetch" href="/yian/assets/index.html.8534a48b.js"><link rel="prefetch" href="/yian/assets/index.html.1eccb630.js"><link rel="prefetch" href="/yian/assets/algorithm.html.5aa43797.js"><link rel="prefetch" href="/yian/assets/index.html.f4fd36c0.js"><link rel="prefetch" href="/yian/assets/index.html.66a4a9ae.js"><link rel="prefetch" href="/yian/assets/note.html.8d687276.js"><link rel="prefetch" href="/yian/assets/index.html.c1eccf0f.js"><link rel="prefetch" href="/yian/assets/cprimer_begin.html.ca342c2d.js"><link rel="prefetch" href="/yian/assets/cprimer_end.html.e75ef41e.js"><link rel="prefetch" href="/yian/assets/note.html.8fbceb60.js"><link rel="prefetch" href="/yian/assets/index.html.e6d59852.js"><link rel="prefetch" href="/yian/assets/linux2.html.0466b75c.js"><link rel="prefetch" href="/yian/assets/index.html.7db5d38a.js"><link rel="prefetch" href="/yian/assets/bom.html.a4ad541d.js"><link rel="prefetch" href="/yian/assets/css.html.5b005a4e.js"><link rel="prefetch" href="/yian/assets/dom.html.c43d1458.js"><link rel="prefetch" href="/yian/assets/es6.html.fe31d9d9.js"><link rel="prefetch" href="/yian/assets/html.html.edab1096.js"><link rel="prefetch" href="/yian/assets/jquery.html.ef62a91c.js"><link rel="prefetch" href="/yian/assets/js_note.html.c8897b6e.js"><link rel="prefetch" href="/yian/assets/node.html.f63be0a7.js"><link rel="prefetch" href="/yian/assets/index.html.291650b0.js"><link rel="prefetch" href="/yian/assets/index.html.c35aac8e.js"><link rel="prefetch" href="/yian/assets/interview.html.b60910b9.js"><link rel="prefetch" href="/yian/assets/index.html.22eedef2.js"><link rel="prefetch" href="/yian/assets/index.html.bae46496.js"><link rel="prefetch" href="/yian/assets/index.html.c88a1d4f.js"><link rel="prefetch" href="/yian/assets/python.html.16fb3992.js"><link rel="prefetch" href="/yian/assets/index.html.432ddb57.js"><link rel="prefetch" href="/yian/assets/opencv_note.html.4f2f0072.js"><link rel="prefetch" href="/yian/assets/404.html.ee04830d.js"><link rel="prefetch" href="/yian/assets/404.1f013c32.js"><link rel="prefetch" href="/yian/assets/Layout.6f63953b.js"><link rel="prefetch" href="/yian/assets/HelloVuepress.cb0e8910.js">
    <link rel="stylesheet" href="/yian/assets/style.4237170f.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/yian/" class=""><img class="logo" src="/yian/img/YiAn.png" alt="YiAn"><span class="site-name can-hide">YiAn</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/yian/navig/" class="" aria-label="导航"><!--[--><!--]--> 导航 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端开发"><span class="title">前端开发</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端开发"><span class="title">前端开发</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>基础入门</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/yian/front/base/" class="" aria-label="Web知识"><!--[--><!--]--> Web知识 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/yian/front/JavaScript/" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/yian/front/JavaScript/html.md" class="" aria-label="HTML"><!--[--><!--]--> HTML <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/yian/front/JavaScript/css.md" class="" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/yian/front/JavaScript/jquery.md" class="" aria-label="jQuery"><!--[--><!--]--> jQuery <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>后端基础</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/yian/front/backend/README.md" class="" aria-label="MongoDB"><!--[--><!--]--> MongoDB <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/yian/front/backend/node.md" class="" aria-label="Node.js"><!--[--><!--]--> Node.js <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>前端框架</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/yian/front/vue/" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/yian/front/react/" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>小程序</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/yian/front/resource/" class="" aria-label="uni-app"><!--[--><!--]--> uni-app <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="图像处理"><span class="title">图像处理</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="图像处理"><span class="title">图像处理</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>基础能力</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/yian/code_ability/Linux/" class="" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/yian/code_ability/C++/" class="" aria-label="C++"><!--[--><!--]--> C++ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>图像</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/yian/image_processing/opencv/" class="" aria-label="OpenCV"><!--[--><!--]--> OpenCV <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/yian/unity/" class="" aria-label="Unity"><!--[--><!--]--> Unity <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/yian/image_processing/machine_learning/" class="" aria-label="机器学习"><!--[--><!--]--> 机器学习 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a href="/yian/Robot/" class="" aria-label="无人机"><!--[--><!--]--> 无人机 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/yian/algorithm/" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/yian/Tool/" class="" aria-label="工具"><!--[--><!--]--> 工具 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/yian/about/" class="" aria-label="关于"><!--[--><!--]--> 关于 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="仓库"><span class="title">仓库</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="仓库"><span class="title">仓库</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://gitee.com/yian0728" rel="noopener noreferrer" target="_blank" aria-label="Gitee"><!--[--><!--]--> Gitee <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/yian0728" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/yian/navig/" class="" aria-label="导航"><!--[--><!--]--> 导航 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端开发"><span class="title">前端开发</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端开发"><span class="title">前端开发</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>基础入门</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/yian/front/base/" class="" aria-label="Web知识"><!--[--><!--]--> Web知识 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/yian/front/JavaScript/" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/yian/front/JavaScript/html.md" class="" aria-label="HTML"><!--[--><!--]--> HTML <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/yian/front/JavaScript/css.md" class="" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/yian/front/JavaScript/jquery.md" class="" aria-label="jQuery"><!--[--><!--]--> jQuery <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>后端基础</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/yian/front/backend/README.md" class="" aria-label="MongoDB"><!--[--><!--]--> MongoDB <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/yian/front/backend/node.md" class="" aria-label="Node.js"><!--[--><!--]--> Node.js <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>前端框架</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/yian/front/vue/" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/yian/front/react/" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>小程序</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/yian/front/resource/" class="" aria-label="uni-app"><!--[--><!--]--> uni-app <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="图像处理"><span class="title">图像处理</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="图像处理"><span class="title">图像处理</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>基础能力</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/yian/code_ability/Linux/" class="" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/yian/code_ability/C++/" class="" aria-label="C++"><!--[--><!--]--> C++ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>图像</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/yian/image_processing/opencv/" class="" aria-label="OpenCV"><!--[--><!--]--> OpenCV <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/yian/unity/" class="" aria-label="Unity"><!--[--><!--]--> Unity <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/yian/image_processing/machine_learning/" class="" aria-label="机器学习"><!--[--><!--]--> 机器学习 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a href="/yian/Robot/" class="" aria-label="无人机"><!--[--><!--]--> 无人机 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/yian/algorithm/" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/yian/Tool/" class="" aria-label="工具"><!--[--><!--]--> 工具 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/yian/about/" class="" aria-label="关于"><!--[--><!--]--> 关于 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="仓库"><span class="title">仓库</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="仓库"><span class="title">仓库</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://gitee.com/yian0728" rel="noopener noreferrer" target="_blank" aria-label="Gitee"><!--[--><!--]--> Gitee <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/yian0728" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a aria-current="page" href="/yian/front/backend/" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="MongoDB"><!--[--><!--]--> MongoDB <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/yian/front/backend/#数据库-database" class="router-link-active router-link-exact-active sidebar-item" aria-label="数据库(DataBase)"><!--[--><!--]--> 数据库(DataBase) <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/yian/front/backend/#关系型数据库-rdbs" class="router-link-active router-link-exact-active sidebar-item" aria-label="关系型数据库  RDBS"><!--[--><!--]--> 关系型数据库  RDBS <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yian/front/backend/#非关系型数据库-nosql" class="router-link-active router-link-exact-active sidebar-item" aria-label="非关系型数据库 noSQL"><!--[--><!--]--> 非关系型数据库 noSQL <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/yian/front/backend/#安装配置mongodb-windows" class="router-link-active router-link-exact-active sidebar-item" aria-label="安装配置MongoDB(windows)"><!--[--><!--]--> 安装配置MongoDB(windows) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yian/front/backend/#安装配置mongodb-linux" class="router-link-active router-link-exact-active sidebar-item" aria-label="安装配置MongoDB(Linux)"><!--[--><!--]--> 安装配置MongoDB(Linux) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yian/front/backend/#mongodb概念解析" class="router-link-active router-link-exact-active sidebar-item" aria-label="MongoDB概念解析"><!--[--><!--]--> MongoDB概念解析 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yian/front/backend/#mongodb基本命令" class="router-link-active router-link-exact-active sidebar-item" aria-label="MongoDB基本命令"><!--[--><!--]--> MongoDB基本命令 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yian/front/backend/#studio-3t" class="router-link-active router-link-exact-active sidebar-item" aria-label="Studio 3T"><!--[--><!--]--> Studio 3T <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yian/front/backend/#数据库crud" class="router-link-active router-link-exact-active sidebar-item" aria-label="数据库CRUD"><!--[--><!--]--> 数据库CRUD <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/yian/front/backend/#插入文档" class="router-link-active router-link-exact-active sidebar-item" aria-label="插入文档"><!--[--><!--]--> 插入文档 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yian/front/backend/#查询文档" class="router-link-active router-link-exact-active sidebar-item" aria-label="查询文档"><!--[--><!--]--> 查询文档 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yian/front/backend/#修改文档" class="router-link-active router-link-exact-active sidebar-item" aria-label="修改文档"><!--[--><!--]--> 修改文档 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yian/front/backend/#删除文档" class="router-link-active router-link-exact-active sidebar-item" aria-label="删除文档"><!--[--><!--]--> 删除文档 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/yian/front/backend/#mongoose" class="router-link-active router-link-exact-active sidebar-item" aria-label="mongoose"><!--[--><!--]--> mongoose <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/yian/front/backend/#mongoose简单使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="mongoose简单使用"><!--[--><!--]--> mongoose简单使用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yian/front/backend/#添加" class="router-link-active router-link-exact-active sidebar-item" aria-label="添加"><!--[--><!--]--> 添加 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yian/front/backend/#查找" class="router-link-active router-link-exact-active sidebar-item" aria-label="查找"><!--[--><!--]--> 查找 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yian/front/backend/#修改" class="router-link-active router-link-exact-active sidebar-item" aria-label="修改"><!--[--><!--]--> 修改 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yian/front/backend/#删除" class="router-link-active router-link-exact-active sidebar-item" aria-label="删除"><!--[--><!--]--> 删除 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/yian/front/backend/node.html" class="sidebar-item sidebar-heading" aria-label="Node.js"><!--[--><!--]--> Node.js <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h2 id="数据库-database" tabindex="-1"><a class="header-anchor" href="#数据库-database" aria-hidden="true">#</a> 数据库(DataBase)</h2><h3 id="关系型数据库-rdbs" tabindex="-1"><a class="header-anchor" href="#关系型数据库-rdbs" aria-hidden="true">#</a> 关系型数据库 RDBS</h3><ul><li>关系:表与表之间的关系. 特点:关系紧密、全是表</li></ul><blockquote><p>mySQL:轻量免费 Oracle:(甲骨文公司)庞大且贵稳定 DB2 SQL Server 基本不用</p></blockquote><p>优点:1. 易于维护 2. 使用方便(SQL通用)3. 进行高级查询:多表之前复杂查询<br> 缺点:读写性能差、所有字段不允许随意修改、灵活性差、高并发需求无法满足</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>excel---数据库
    sheet页签   --- 表
    列头    --- 字段 ID字段是一个唯一标识符,不允许修改,ID被称为‘主键’
    -行 ---  一条数据
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="非关系型数据库-nosql" tabindex="-1"><a class="header-anchor" href="#非关系型数据库-nosql" aria-hidden="true">#</a> 非关系型数据库 noSQL</h3><blockquote><p>MongoDB Redis</p></blockquote><p>特点:关系不紧密,有文档有键值对</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>excel---数据库
    sheet页签   --- 集合
    列头    --- 字段 ID字段是一个唯一标识符,不允许修改,ID被称为‘主键’
    -行 --- 一条文档
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>优点:1. 格式灵活2. 读写速度快,非关系型数据库可以使用内存作为载体,关系型数据库只能使用硬盘</li><li>缺点:1. 不支持SQL2. 不支持事务(事务:原子性,不可分割性--- 一件事要么干完要么别干)3. 复杂查询特别繁琐</li></ul><p><a href="https://www.mongodb.org.cn/" target="_blank" rel="noopener noreferrer">MongoDB中文网<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li><p>MongoDB 是一个基于分布式文件存储的数据库.由 C++ 语言编写.旨在为 WEB 应用提供可扩展的高性能数据存储解决方案.</p></li><li><p>MongoDB 是一个介于关系数据库和非关系数据库之间的产品,是非关系数据库当中功能最丰富,最像关系数据库的.</p></li></ul><p>设计目标，极简，灵活，所有的数据模型都是面向文档，所谓的文档简单可以理解为JSON结构</p><h2 id="安装配置mongodb-windows" tabindex="-1"><a class="header-anchor" href="#安装配置mongodb-windows" aria-hidden="true">#</a> 安装配置MongoDB(windows)</h2><p><a href="https://www.runoob.com/mongodb/mon" target="_blank" rel="noopener noreferrer">Windows 平台安装 MongoDB<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ol><li>下载免费版安装</li><li>不安装桌面环境mongoDB Compass ,本人安装在-&gt;D:\mongodb</li><li>环境变量-&gt;添加D:\mongodb\bin</li><li>创建文件夹 D:\data\db <code>一定要和mongoDB安装路径同磁盘同级</code></li><li>在<code>D:\mongodb\bin</code>文件夹中运行cmd命令<strong>连接数据库</strong>(用的时候不能关闭该命令窗口)</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>D:\mongodb\bin&gt; mongod --dbpath D:\data\db
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="6"><li>在<code>D:\mongodb\bin</code>文件夹中运行cmd命令<strong>启动数据库</strong></li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>D:\mongodb\bin&gt; mongo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>默认端口号：27017</p><h4 id="将mongodb配置成windows系统服务-本人没配置成功-还是用上面的手动启动吧" tabindex="-1"><a class="header-anchor" href="#将mongodb配置成windows系统服务-本人没配置成功-还是用上面的手动启动吧" aria-hidden="true">#</a> 将MongoDB配置成windows系统服务(本人没配置成功,还是用上面的手动启动吧)</h4><ol><li>新建文件夹<code>D:\data\log</code></li><li>在<code>D:\mongodb</code>文件夹下新建<code>D:\mongodb\mongod.cfg</code>文件</li><li>配置<code>mongod.cfg</code>文件</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>systemLog:
    destination: file
    path: D:\data\log\mongod.log
storage:
    dbPath: D:\data\db
net:
    port:27017
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>在<code>D:\data\log</code>中新建文件<code>D:\data\log\mongod.log</code></li><li>通过windows查找到cmd右键以管理员方式运行,运行以下代码</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sc.exe create MongoDB binPath = &quot;\&quot;D:\mongodb\bin\mongod.exe\&quot; --service--config=\&quot;D:\mongodb\mongod.cfg\&quot;&quot; DisplayName= &quot;MongoDB&quot; start= &quot;auto&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>删除命令</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sc delete MongoDB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>可在任务管理器-&gt;服务-&gt;打开服务 中找到MongoDB，右键属性 选项查看MongoDB启动配置</p><h2 id="安装配置mongodb-linux" tabindex="-1"><a class="header-anchor" href="#安装配置mongodb-linux" aria-hidden="true">#</a> 安装配置MongoDB(Linux)</h2><p><a href="https://www.runoob.com/mongo" target="_blank" rel="noopener noreferrer">Linux平台安装MongoDB<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>安装全部按照上面的教程来的,直接就安装成功,改了一下安装路径<code>/usr/local/mongodb</code>.下面简单记录以下使用命令</p><h4 id="创建数据库目录" tabindex="-1"><a class="header-anchor" href="#创建数据库目录" aria-hidden="true">#</a> 创建数据库目录</h4><ul><li>数据存储目录：<code>/var/lib/mongodb</code></li><li>日志文件目录：<code>/var/log/mongodb</code></li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">mkdir</span> -p /var/lib/mongo
<span class="token function">sudo</span> <span class="token function">mkdir</span> -p /var/log/mongodb
<span class="token function">sudo</span> <span class="token function">chown</span> <span class="token variable"><span class="token variable">`</span><span class="token function">whoami</span><span class="token variable">`</span></span> /var/lib/mongo     <span class="token comment"># 设置权限</span>
<span class="token function">sudo</span> <span class="token function">chown</span> <span class="token variable"><span class="token variable">`</span><span class="token function">whoami</span><span class="token variable">`</span></span> /var/log/mongodb   <span class="token comment"># 设置权限</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>启动 Mongodb 服务</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mongod --dbpath /var/lib/mongo --logpath /var/log/mongodb/mongod.log --fork
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="mongodb-后台管理-shell" tabindex="-1"><a class="header-anchor" href="#mongodb-后台管理-shell" aria-hidden="true">#</a> MongoDB 后台管理 Shell</h4><p>MongoDB Shell 是 MongoDB 自带的交互式 Javascript shell,用来对 MongoDB 进行操作和管理的交互式环境.当你进入 mongoDB 后台后,它默认会链接到 test 文档(数据库)</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /usr/local/mongodb/bin/
./mongo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>现在让我们插入一些简单的数据，并对插入的数据进行检索</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 将数字 10 插入到 runoob 集合的 x 字段中</span>
<span class="token operator">&gt;</span> db<span class="token punctuation">.</span>runoob<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">WriteResult</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;nInserted&quot;</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db<span class="token punctuation">.</span>runoob<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5f069bdb4e02f8baf90f1184&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;x&quot;</span> <span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>停止 mongodb</strong> 可以使用以下命令</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>mongod <span class="token operator">--</span>dbpath <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>lib<span class="token operator">/</span>mongo <span class="token operator">--</span>logpath <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>log<span class="token operator">/</span>mongodb<span class="token operator">/</span>mongod<span class="token punctuation">.</span>log <span class="token operator">--</span>shutdown
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>也可以在 mongo 的命令出口中实现</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&gt;</span> use admin
<span class="token comment">// switched to db admin</span>
<span class="token operator">&gt;</span> db<span class="token punctuation">.</span><span class="token function">shutdownServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mongodb概念解析" tabindex="-1"><a class="header-anchor" href="#mongodb概念解析" aria-hidden="true">#</a> MongoDB概念解析</h2><table><thead><tr><th>SQL术语/概念</th><th>MongoDB术语/概念</th><th>解释/说明</th></tr></thead><tbody><tr><td>database</td><td>database</td><td>数据库</td></tr><tr><td>table</td><td>collection</td><td>数据库表/集合</td></tr><tr><td>row</td><td>document</td><td>数据记录行/文档</td></tr><tr><td>column</td><td>field</td><td>数据字段/域</td></tr><tr><td>index</td><td>index</td><td>索引</td></tr><tr><td>table joins</td><td></td><td>表连接,MongoDB不支持</td></tr><tr><td>primar key</td><td>primary key</td><td>主键,MongoDB自动将_id字段设置为主键</td></tr></tbody></table><h2 id="mongodb基本命令" tabindex="-1"><a class="header-anchor" href="#mongodb基本命令" aria-hidden="true">#</a> MongoDB基本命令</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 查看当前操作的是哪一个数据库</span>
<span class="token operator">&gt;</span> db

<span class="token comment">// 显示所有的数据库  (该数据库必须有数据才会显示)</span>
<span class="token operator">&gt;</span> show dbs

<span class="token comment">// 切换到对应数据库,如果没有该数据库会自动创建一个</span>
<span class="token operator">&gt;</span> use student

<span class="token comment">// 向某个数据库的集合中插入一个文档</span>
<span class="token operator">&gt;</span> db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;易安&#39;</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token string">&#39;20&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">WriteResult</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;nInserted&quot;</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 展示当前数据库中所有集合</span>
<span class="token operator">&gt;</span> show collections
<span class="token comment">// student</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="studio-3t" tabindex="-1"><a class="header-anchor" href="#studio-3t" aria-hidden="true">#</a> Studio 3T <span class="badge warning" style="vertical-align:top;"><!--[-->付费.傻瓜式<!--]--></span></h2><p><a href="https://studio3t.com/download-thank-you/?OS=x64" target="_blank" rel="noopener noreferrer">点击下载<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,下载后解压并把执行文件放入<code>/bin/</code>文件夹下,执行<code>./studio-3t-linux-x64.sh</code>安装即可.</p><h2 id="数据库crud" tabindex="-1"><a class="header-anchor" href="#数据库crud" aria-hidden="true">#</a> 数据库CRUD</h2><div class="custom-container tip"><p class="custom-container-title">create read update delete</p></div><h3 id="插入文档" tabindex="-1"><a class="header-anchor" href="#插入文档" aria-hidden="true">#</a> 插入文档</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;易安&#39;</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token string">&#39;20&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// WriteResult({ &quot;nInserted&quot; : 1 })</span>

<span class="token comment">// 向集合插入一个(只能添加一个)新文档 </span>
<span class="token operator">&gt;</span> db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">insertOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;yian&#39;</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token string">&#39;20&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 向集合插入一个多个文档 </span>
<span class="token operator">&gt;</span> db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">insertMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;小明&#39;</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token string">&#39;20&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;小红&#39;</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token string">&#39;20&#39;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查询文档" tabindex="-1"><a class="header-anchor" href="#查询文档" aria-hidden="true">#</a> 查询文档</h3><blockquote><p>query:使用查询操作符指定查询条件<br> projection:使用投影操作符指定返回的键,查询时返回文档中所有键值</p></blockquote><div class="custom-container tip"><p class="custom-container-title">投影就相当于一个过滤器,希望获取的置1,不希望获取置0,但是1和0不能混用,_id除外</p></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 查询当前集合中的所有文档</span>
<span class="token operator">&gt;</span> db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// db.student.find([query], [projection])</span>
<span class="token comment">// 查询age字段等于18的文档</span>
<span class="token operator">&gt;</span> db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token operator">&gt;</span> db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    
<span class="token comment">// 只返回一个文档</span>
<span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>常见操作符</li></ul><table><thead><tr><th>操作</th><th>格式</th></tr></thead><tbody><tr><td>=</td><td><code>{&lt;key&gt;:&lt;value&gt;}</code></td></tr><tr><td>&lt;</td><td><code>{&lt;key&gt;:{$lt:&lt;value&gt;}}</code></td></tr><tr><td>&lt;=</td><td><code>{&lt;key&gt;:{$lte:&lt;value&gt;}}</code></td></tr><tr><td>&gt;</td><td><code>{&lt;key&gt;:{$gt:&lt;value&gt;}}</code></td></tr><tr><td>&gt;=</td><td><code>{&lt;key&gt;:{$gte:&lt;value&gt;}}</code></td></tr><tr><td>!=</td><td><code>{&lt;key&gt;:{$ne:&lt;value&gt;}}</code></td></tr></tbody></table><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 查询age大于18且小于91的目标文档</span>
<span class="token operator">&gt;</span> db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token literal-property property">$lt</span><span class="token operator">:</span><span class="token number">91</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 查询年龄等于12,14,45,23的目标文档</span>
<span class="token operator">&gt;</span> db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>逻辑或<code>$in $or</code></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 查找age等于18或sex为男的目标文档</span>
<span class="token operator">&gt;</span> db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>$or<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">sex</span><span class="token operator">:</span><span class="token string">&#39;男&#39;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// 查询age字段中年龄等于18或者20的目标文档</span>
<span class="token operator">&gt;</span> db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span>$<span class="token keyword">in</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>逻辑非<code>$nin</code></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 查询age字段中年龄不是18或者20的目标文档</span>
<span class="token operator">&gt;</span> db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$nin</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>正则匹配(所有正则都可以写)</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">address</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">北京市</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><code>$where</code>查找</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token function-variable function">$where</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&quot;yian&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">===</span> <span class="token number">21</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="修改文档" tabindex="-1"><a class="header-anchor" href="#修改文档" aria-hidden="true">#</a> 修改文档</h3><ul><li><code>db.集合名.update(查询条件,要更新的内容,[配置对象])</code>,<strong>需要将原有的数据也要写进去</strong></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;YiAn&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token string">&quot;18&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">address</span><span class="token operator">:</span><span class="token string">&quot;北京市&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 会将整个文档替换掉,_id不受影响,默认一次替换一个</span>
db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">key</span><span class="token operator">:</span><span class="token string">&quot;true&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>使用<code>$set</code><strong>修改指定内容,其他数据不变</strong></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 将age为18的名字修改为小易</span>
db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;小易&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">updateOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;小易&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 将所有满足条件的都修改了,{multi:true}表示进行全部修改 -- 必须要加$set</span>
db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;小易&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">multi</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 一次修改所有满足条件的文档 -- 必须要加$set</span>
db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">updateMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">sex</span><span class="token operator">:</span><span class="token string">&quot;男&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">sex</span><span class="token operator">:</span><span class="token string">&quot;女&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="删除文档" tabindex="-1"><a class="header-anchor" href="#删除文档" aria-hidden="true">#</a> 删除文档</h3><div class="custom-container danger"><p class="custom-container-title">在执行 remove() 函数前先执行 find() 命令来判断执行的条件是否正确,这是一个比较好的习惯</p></div><p>语法:<code>db.集合名.remove()</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$lt</span><span class="token operator">:</span><span class="token number">25</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="mongoose" tabindex="-1"><a class="header-anchor" href="#mongoose" aria-hidden="true">#</a> mongoose</h2><blockquote><p>Mongoose是一个让我们可以通过Node来操作MongoDB的模块.Mongoose是一个对象文档模型(ODM)库,它对Node原生的MongoDB模块进行了进一步的优化封装,并提供了更多的功能.</p></blockquote><ul><li>可以为文档创建一个模式结构(Schema)</li><li>可以对模型中的对象/文档进行验证</li><li>数据可以通过类型转换为对象类型</li><li>可以使用很多中间件来应用业务逻辑</li><li>比Node原生MongoDB驱动更容易</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i mongoose --save
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="mongoose简单使用" tabindex="-1"><a class="header-anchor" href="#mongoose简单使用" aria-hidden="true">#</a> mongoose简单使用</h3><div class="custom-container tip"><p class="custom-container-title">如果你定义的集合名字不是复数,mongoose会自动为你转换为复数(user-&gt;users)</p></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 引入模块</span>
<span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mongoose&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 连接数据库usersData</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&#39;mongodb://localhost:27017/usersData&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// 监听数据库连接状态  once监听一次</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">&#39;open&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;error.....&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;数据库连接成功...&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 引入模式对象</span>
        <span class="token keyword">let</span> Schema <span class="token operator">=</span> mongoose<span class="token punctuation">.</span>Schema<span class="token punctuation">;</span>

        <span class="token comment">// 创建约束对象</span>
        <span class="token keyword">let</span> userSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">user_id</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span>String<span class="token punctuation">,</span>    <span class="token comment">// 设置类型</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">// 设置该项为必填</span>
                <span class="token literal-property property">unique</span><span class="token operator">:</span><span class="token boolean">true</span>     <span class="token comment">// 设置为唯一的  </span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
            <span class="token literal-property property">age</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
            <span class="token literal-property property">hobbies</span><span class="token operator">:</span><span class="token punctuation">[</span>String<span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token literal-property property">info</span><span class="token operator">:</span> Schema<span class="token punctuation">.</span>Types<span class="token punctuation">.</span>Mixed<span class="token punctuation">,</span> <span class="token comment">// 可以接收任意类型</span>
            <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span>String<span class="token punctuation">,</span>
                <span class="token comment">// 不填写则-&gt;默认值设为当前时间</span>
                <span class="token keyword">default</span><span class="token operator">:</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">enable_flag</span><span class="token operator">:</span> String  
            <span class="token comment">// 每一条数据都会有,表示该数据是否隐藏(是否可查),控制用户是否可见</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 创建模型对象</span>
        <span class="token keyword">let</span> userModel <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">&#39;users&#39;</span><span class="token punctuation">,</span> userSchema<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 向users集合添加的数据 -&gt;这个都是前端发来的,这里只是演示</span>
        <span class="token keyword">let</span> userObj <span class="token operator">=</span> <span class="token punctuation">{</span>      
            <span class="token literal-property property">user_id</span><span class="token operator">:</span> <span class="token string">&quot;001&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;yian&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
            <span class="token literal-property property">hobbies</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;学习&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;吃&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token literal-property property">info</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> 
            <span class="token comment">// date: ,</span>
            <span class="token literal-property property">enable_flag</span><span class="token operator">:</span> <span class="token string">&quot;Y&quot;</span>  
        <span class="token punctuation">}</span>

        <span class="token comment">// 开始使用模型对象 </span>
        userModel<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>userObj<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// data就是上面的对象</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 监听数据库关闭事件</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">&#39;close&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;数据库关闭失败&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;数据库关闭成功&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="highlight-lines"><br><div class="highlight-line"> </div><br><br><div class="highlight-line"> </div><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="添加" tabindex="-1"><a class="header-anchor" href="#添加" aria-hidden="true">#</a> 添加</h3><p>上面的基础使用中已经介绍了如何向一个数据库的集合中写入文档</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>userModel<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>userObj<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// data就是上面的对象</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查找" tabindex="-1"><a class="header-anchor" href="#查找" aria-hidden="true">#</a> 查找</h3><h4 id="find" tabindex="-1"><a class="header-anchor" href="#find" aria-hidden="true">#</a> find</h4><p>查找也很方便,<code>data</code>为一个文档数组---<strong>数组类型</strong>,查询没有结果会返回一个<strong>空数组</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>userModel<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token number">40</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// [</span>
<span class="token comment">//   { _id: new ObjectId(&quot;e26e3c7d41a2355&quot;), name: &#39;xiao红&#39; },</span>
<span class="token comment">//   { _id: new ObjectId(&quot;4d8e2de408d0169&quot;), name: &#39;xiao明&#39; },</span>
<span class="token comment">//   { _id: new ObjectId(&quot;600f15ab78d9718&quot;), name: &#39;xiao易&#39; }</span>
<span class="token comment">// ]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="findone" tabindex="-1"><a class="header-anchor" href="#findone" aria-hidden="true">#</a> findOne</h4><p>findOne的返回值为一个文档---<strong>对象类型</strong>,没找到返回的是<strong>null</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>userModel<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token number">40</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//   { _id: new ObjectId(&quot;e26e3c7d41a2355&quot;), name: &#39;xiao红&#39; }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>还有另外一种写法</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> val <span class="token operator">=</span> userModel<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token number">40</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// then与catch只会执行一个   -&gt; 写起来比较美观</span>
val<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
val<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>简写为↓,一般catch可以不写</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>userModel<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token number">40</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="修改" tabindex="-1"><a class="header-anchor" href="#修改" aria-hidden="true">#</a> 修改</h3><blockquote><p>在mongoose中update弃用</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>userModel<span class="token punctuation">.</span><span class="token function">updateOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;xiao易&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">address</span><span class="token operator">:</span><span class="token string">&quot;北京市&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * <span class="token punctuation">{</span>
 *   acknowledged: true,  该修改方法执行完成
 *   modifiedCount: 1,    修改的数量
 *   upsertedId: null,
 *   upsertedCount: 0,
 *   matchedCount: 1      匹配的数量
 * <span class="token punctuation">}</span>
**/</span>
userModel<span class="token punctuation">.</span><span class="token function">updateMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">40</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">address</span><span class="token operator">:</span><span class="token string">&quot;北京市&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 *<span class="token punctuation">{</span>
 *  acknowledged: true,
 *  modifiedCount: 3,
 *  upsertedId: null,
 *  upsertedCount: 0,
 *  matchedCount: 3
 *<span class="token punctuation">}</span>
**/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="删除" tabindex="-1"><a class="header-anchor" href="#删除" aria-hidden="true">#</a> 删除</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>userModel<span class="token punctuation">.</span><span class="token function">deleteOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">address</span><span class="token operator">:</span><span class="token string">&quot;北京市&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { acknowledged: true, deletedCount: 1 }</span>

userModel<span class="token punctuation">.</span><span class="token function">deleteMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">address</span><span class="token operator">:</span><span class="token string">&quot;河南省&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { acknowledged: true, deletedCount: 2 }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">最近更新于: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: yian0728@163.com">yian0728</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a href="/yian/front/backend/node.html" class="" aria-label="Node.js"><!--[--><!--]--> Node.js <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/yian/assets/app.63d6be65.js" defer></script>
  </body>
</html>
